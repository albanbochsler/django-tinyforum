{% extends "tinyforum/base.html" %}

{% load i18n tinyforum staticfiles %}

{% block extra-body-class %}forum{% endblock %}

{% block lead-title %}
  <h1>{% trans "Biotta Wellness Woche" %}</h1>
{% endblock %}

{% block lead-right %}
  <p>We’d like to be there for you - our customers and our partners - when you need us. Find out here how to contact us, and about vacancies and sales.</p>
{% endblock %}


{% block main-region-content %}
    {# TODO: Activate as soon as the forum is accessible for non authenticated users #}
    {# {% if user.is_authenticated %} #}
    <div class="row">
      <div class="columns small-12 medium-8">
        <h2>{% trans "The community" %}</h2>
          {% blocktrans %}
            <p>Wir freuen uns, dass Sie mehr über die Biotta Wellness Woche erfahren möchten. In der Biotta Community haben Sie die Möglichkeit, sich über aktuelle Themen im Forum zu informieren oder durch die häufigsten Fragen & Antworten zur Wellness Woche zu stöbern. Neu ist auch der exklusive 7-tägige Newsletter, der Sie während Ihrer Wellness Woche begleitet und Tipps für jeden Wellness Tag bereithält.</p>
          {% endblocktrans %}

      </div>
      <div class="columns small-12 medium-4">
        <section class="forum__box">
          <h2>{% trans "Code activation" %}</h2>
          {% blocktrans %}
            <p>Mit Ihrem Booklet-Code können Sie weitere exklusive Funktionen der Community freischalten.</p>
          {% endblocktrans %}
            <form name="activation" action="." method="POST">
              <label for="activation_code">{% trans "Activation code" %}</label>
              <input type="text" name="activation_code" id="activation_code"/>
              <button class="small float-right">{% trans "Activate" %}</button>
            </form>
        </section>
        <section class="forum__box">
          <h2>{% trans "Newsletter" %}</h2>
          {% blocktrans %}
              <p>Tägliche Tipps und Infos begleiten Sie während Ihrer Wellness Woche.</p>
          {% endblocktrans %}
          <a href="{% url 'wellnessweek-overview' %}">{% trans "Ihren Wochenstart festlegen" %}</a>
        </section>
      </div>
      {% comment %}
      <div class="columns small-12">
        <a class="login-link forum__login-link" href="{% url 'login' %}">{% trans "Login" %}</a>
      </div>
      {% endcomment %}
    </div>
    {# {% endif %} #}

    {% if user.is_authenticated %}
      <span class="thread-filter">
        {% trans "Status" %}:
        <a class="thread-filter__link{% if request.GET.status != "closed" %} thread-filter__link--active{% endif %}" href=".">{% trans "Active" %}</a>
        <a class="thread-filter__link{% ifequal request.GET.status "closed" %} thread-filter__link--active{% endifequal %}" href="?status=closed">{% trans "Closed" %}</a>
      </span>
      <a class="forum__add create-link" href="{% url 'tinyforum:thread-create' %}">{% trans "Create new thread" %}</a>

    {% endif %}

    <table class="thread-list">
      <thead class="thread-list__header">
        <tr>
          <th class="thread-list__pin"></th>
          <th class="thread-list__label"></th>
          <th class="thread-list__title">{% trans 'Thread' %}</th>
          <th class="thread-list__post-count">{% trans 'Posts' %}</th>
          <th class="thread-list__author">{% trans 'Author' %}</th>
          <th class="thread-list__latest-post">{% trans 'Latest post' %}</th>
        </tr>
      </thead>
      <tbody>

      {% for thread in object_list %}
        <tr class="thread-list__row">
          <td class="thread-list__pin">
            {% if thread.is_pinned %}<img src="{% static "webapp/images/pin.svg" %}" alt="{% trans "Pinned" %}" />{% endif %}
          </td>
          <td class="thread-list__label">
            {% thread_star thread %}
          </td>
          <td class="thread-list__title">

            <a href="{{ thread.get_absolute_url }}">
              {{ thread.title }}
            </a>
          </td>
          <td class="thread-list__post-count">{{ thread.post_count }}</td>
          <td class="thread-list__author">{{ thread.authored_by.profile }}</td>
          <td class="thread-list__latest-post">
            <a href="{{ thread.get_absolute_url }}?page=last">
              <time datetime="{{ thread.latest_post.created_at|date:'Y-m-d\TH:i' }}">{{ thread.latest_post.created_at|date:'j.m.Y H:i' }}</time><br />
              {{ thread.latest_post.authored_by.profile }}
            </a>
          </td>
        </tr>
      {% endfor %}

      </tbody>
    </table>

{% include "tinyforum/pagination.html" %}

{% endblock %}
